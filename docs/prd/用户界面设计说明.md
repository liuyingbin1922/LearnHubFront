# 用户界面设计说明

## 设计原则

### 1. 简洁高效
- 最小化用户操作步骤
- 核心功能突出显示
- 减少视觉干扰元素

### 2. 移动优先
- 响应式设计，适配桌面和平板
- 触摸友好的交互设计
- 大按钮，易于点击

### 3. 直观易用
- 清晰的视觉层级
- 一致的交互模式
- 及时的操作反馈

### 4. 美观现代
- 采用现代化设计风格
- 统一的色彩体系
- 舒适的阅读体验

## 页面详细设计

### 1. 错题集列表页 (`/collections`)

#### 布局结构
```
┌──────────────────────────────────────┐
│ [Logo]  错题收集工具        [用户]    │  ← 顶部导航
├──────────────────────────────────────┤
│                                      │
│  ┌────────────────────────────────┐  │
│  │  🔍  搜索错题集...              │  │  ← 搜索栏
│  └────────────────────────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │  📚 高一数学-函数              │  │  ← 错题集卡片
│  │     15题 | 更新于 1小时前       │  │
│  │     [编辑] [删除] [导出PDF]     │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │  📚 高二物理-力学              │  │
│  │     23题 | 更新于 3天前         │  │
│  │     [编辑] [删除] [导出PDF]     │  │
│  └────────────────────────────────┘  │
│                                      │
│           [新建错题集 +]             │  ← 新建按钮
│                                      │
└──────────────────────────────────────┘
```

#### 交互说明
1. **搜索功能**
   - 实时搜索错题集名称
   - 支持模糊匹配

2. **卡片操作**
   - 点击卡片进入详情页
   - 右滑显示操作菜单（编辑/删除/导出）
   - 长按多选批量操作

3. **新建按钮**
   - 悬浮按钮，始终可见
   - 点击弹出新建对话框

#### 状态设计
- **空状态**：显示"还没有错题集，快去创建第一个吧！"
- **加载状态**：骨架屏
- **搜索无结果**：显示"没有找到相关错题集"

---

### 2. 错题集详情页 (`/collections/:id`)

#### 布局结构
```
┌──────────────────────────────────────┐
│ ← 返回  高一数学-函数        [...]   │  ← 顶部导航
├──────────────────────────────────────┤
│  📊 共15题     🔍 筛选 [全部▼]      │  ← 统计和筛选
├──────────────────────────────────────┤
│                                      │
│  ┌─────────┐  ┌─────────┐  ┌─────┐   │  ← 错题卡片网格
│  │  [图片] │  │  [图片] │  │ ...│   │
│  │ 函数图像│  │ 二次函数│  │     │   │
│  └─────────┘  └─────────┘  └─────┘   │
│  📝 题目文字摘要...      [编辑]       │
│                                      │
│  ┌─────────┐  ┌─────────┐  ┌─────┐   │
│  │  [图片] │  │  [图片] │  │ ...│   │
│  │ 导数计算│  │ 函数最值│  │     │   │
│  └─────────┘  └─────────┘  └─────┘   │
│  📝 题目文字摘要...      [编辑]       │
│                                      │
│           [添加错题 +]               │  ← 添加按钮
│                                      │
│        [导出PDF 📄]                  │  ← 导出按钮
│                                      │
└──────────────────────────────────────┘
```

#### 交互说明
1. **筛选功能**
   - 下拉菜单：全部/已掌握/需复习/重点题
   - 标签筛选：点击标签筛选

2. **卡片操作**
   - 点击卡片进入错题详情页
   - 右下角编辑按钮快速编辑

3. **批量操作**
   - 长按进入选择模式
   - 批量删除/移动/导出

#### 状态设计
- **空状态**：显示"还没有错题，快去添加第一道题吧！"
- **筛选无结果**：显示"没有符合条件的错题"

---

### 3. 新增错题页 (`/collections/:id/new`)

#### 布局结构 - 步骤流程
```
步骤1: 上传图片
┌──────────────────────────────────────┐
│ ← 返回  添加错题        步骤 1/4      │
├──────────────────────────────────────┤
│                                      │
│     ┌─────────────────────────┐      │
│     │                         │      │
│     │     拖拽图片到此处      │      │
│     │      或点击上传        │      │
│     │                         │      │
│     └─────────────────────────┘      │
│                                      │
│     支持 JPG、PNG 格式                │
│     图片大小不超过 10MB               │
│                                      │
│            [选择文件]                │
│                                      │
└──────────────────────────────────────┘

步骤2: 裁剪图片
┌──────────────────────────────────────┐
│ ← 返回  裁剪题目        步骤 2/4      │
├──────────────────────────────────────┤
│                                      │
│     ┌─────────────────────────┐      │
│     │  ┌─────────────────┐   │      │
│     │  │                 │   │      │
│     │  │   [题目区域]     │   │      │
│     │  │                 │   │      │
│     │  └─────────────────┘   │      │
│     │                         │      │
│     └─────────────────────────┘      │
│                                      │
│  拖动裁剪框调整题目区域                │
│                                      │
│  [上一步]              [下一步]       │
│                                      │
└──────────────────────────────────────┘

步骤3: OCR识别
┌──────────────────────────────────────┐
│ ← 返回  识别文字        步骤 3/4      │
├──────────────────────────────────────┤
│                                      │
│  ┌─────────────────────────┐         │
│  │     [裁剪后图片]       │         │
│  └─────────────────────────┘         │
│                                      │
│  🔄 正在识别文字...                   │
│                                      │
│  ┌─────────────────────────┐         │
│  │ 已知函数 f(x) = ax² +    │         │
│  │ bx + c，求函数的最小值   │         │
│  │ 和最大值。              │         │
│  └─────────────────────────┘         │
│                                      │
│  [重新识别]                          │
│                                      │
│  [上一步]              [下一步]       │
│                                      │
└──────────────────────────────────────┘

步骤4: 编辑信息
┌──────────────────────────────────────┐
│ ← 返回  确认信息        步骤 4/4      │
├──────────────────────────────────────┤
│                                      │
│  📝 OCR识别结果                      │
│  ┌────────────────────────────────┐  │
│  │ 已知函数 f(x) = ax² + bx + c， │  │
│  │ 求函数的最小值和最大值。       │  │
│  └────────────────────────────────┘  │
│  (可编辑)                            │
│                                      │
│  📝 备注/错因                        │
│  ┌────────────────────────────────┐  │
│  │ 未掌握二次函数最值求解方法     │  │
│  └────────────────────────────────┘  │
│                                      │
│  🏷️ 标签 (可选)                     │
│  ┌────────────────────────────────┐  │
│  │ [函数] [二次函数] [+添加标签]   │  │
│  └────────────────────────────────┘  │
│                                      │
│  [保存到错题集]                      │
│                                      │
└──────────────────────────────────────┘
```

#### 交互说明
1. **步骤导航**
   - 顶部显示当前步骤和总步骤数
   - 支持上一步/下一步导航
   - 自动保存进度

2. **图片上传**
   - 支持拖拽上传
   - 文件选择对话框
   - 实时预览

3. **图片裁剪**
   - 可调整裁剪框大小和位置
   - 缩放和平移图片
   - 保持比例锁定

4. **OCR结果**
   - 显示识别进度
   - 可编辑识别文本
   - 重新识别按钮

5. **信息编辑**
   - OCR文本编辑
   - 备注输入
   - 标签管理（添加/删除）

---

### 4. 错题详情页 (`/problems/:id`)

#### 布局结构
```
┌──────────────────────────────────────┐
│ ← 返回  错题详情                     │
├──────────────────────────────────────┤
│                                      │
│  ┌────────────────────────────────┐  │
│  │         [题目图片]            │  │
│  │      (可点击放大查看)          │  │
│  └────────────────────────────────┘  │
│                                      │
│  📝 题目文字                         │
│  ┌────────────────────────────────┐  │
│  │ 已知函数 f(x) = ax² + bx + c， │  │
│  │ 求函数的最小值和最大值。       │  │
│  └────────────────────────────────┘  │
│  (可编辑) [编辑]                     │
│                                      │
│  📝 备注                            │
│  ┌────────────────────────────────┐  │
│  │ 未掌握二次函数最值求解方法     │  │
│  │ 需复习：顶点坐标公式           │  │
│  └────────────────────────────────┘  │
│  (可编辑) [编辑]                     │
│                                      │
│  🏷️ 标签                            │
│  ┌────────────────────────────────┐  │
│  │ [函数] [二次函数] [最值]        │  │
│  └────────────────────────────────┘  │
│                                      │
│  📅 创建时间：2026-01-13 10:30       │
│                                      │
│         [编辑] [删除]                │
│                                      │
└──────────────────────────────────────┘
```

#### 交互说明
1. **图片查看**
   - 点击图片全屏查看
   - 支持缩放
   - 双击缩放

2. **快速编辑**
   - OCR文本可点击编辑
   - 备注可点击编辑
   - 标签可点击管理

3. **操作菜单**
   - 编辑：进入编辑模式
   - 删除：确认后删除
   - 移动：移动到其他错题集

---

### 5. 导出设置页

#### 布局结构
```
┌──────────────────────────────────────┐
│ ← 返回  导出设置                     │
├──────────────────────────────────────┤
│                                      │
│  📄 排版方式                        │
│  ○ 单题一页                         │
│  ○ 双题一页                         │
│                                      │
│  📝 包含内容                        │
│  ☑ 题目图片                        │
│  ☑ OCR文字                         │
│  ☑ 备注信息                        │
│                                      │
│  📐 纸张大小                        │
│  ○ A4 (推荐)                       │
│  ○ A3                              │
│                                      │
│  🏷️ 标签筛选                        │
│  ○ 全部题目                        │
│  ○ 已选择标签                       │
│  □ 函数 (0/15)                      │
│  □ 二次函数 (8/15)                  │
│  □ 导数 (5/15)                      │
│                                      │
│  📊 预览                            │
│  ┌────────────────────────────────┐  │
│  │  预计页数：15 页                │  │
│  │  文件大小：~5 MB               │  │
│  └────────────────────────────────┘  │
│                                      │
│         [开始导出]                   │
│                                      │
└──────────────────────────────────────┘
```

#### 交互说明
1. **实时预览**
   - 显示预计页数
   - 显示文件大小
   - 实时更新

2. **标签筛选**
   - 多选标签
   - 显示每个标签的题数
   - 全选/反选

3. **导出进度**
   - 进度条显示
   - 完成后自动下载

---

## 组件设计

### 1. 图片裁剪组件
```typescript
interface CropperProps {
  imageSrc: string;
  aspectRatio?: number;
  onCropComplete: (croppedImageBlob: Blob) => void;
}
```

**特性**：
- 支持自由裁剪
- 可锁定比例
- 支持缩放和平移
- 实时预览

### 2. 上传组件
```typescript
interface UploadProps {
  accept?: string;
  maxSize?: number;
  onUpload: (file: File) => void;
}
```

**特性**：
- 拖拽上传
- 文件类型验证
- 大小限制
- 上传进度

### 3. 标签组件
```typescript
interface TagInputProps {
  value: string[];
  suggestions?: string[];
  onChange: (tags: string[]) => void;
}
```

**特性**：
- 可添加/删除标签
- 智能提示
- 颜色分类

## 响应式设计

### 断点设置
- **sm**: 640px+
- **md**: 768px+
- **lg**: 1024px+
- **xl**: 1280px+

### 布局适配
- **桌面 (>1024px)**：多列布局，侧边栏导航
- **平板 (768-1024px)**：双列布局，顶部导航
- **手机 (<768px)**：单列布局，底部标签导航

## 主题色彩

### 主色调
- **主色**：#3B82F6 (蓝色)
- **辅色**：#10B981 (绿色)
- **警告色**：#F59E0B (橙色)
- **错误色**：#EF4444 (红色)
- **中性色**：
  - 文字：#1F2937
  - 副文字：#6B7280
  - 边框：#E5E7EB
  - 背景：#F9FAFB

### 深色模式支持
- 主色适配
- 文字对比度优化
- 图片亮度调整

## 动效设计

### 过渡动画
- **页面切换**：300ms ease
- **卡片悬停**：200ms ease
- **按钮点击**：100ms ease
- **模态框弹出**：200ms ease

### 微交互
- 按钮点击反馈
- 加载状态动画
- 成功/失败提示
- 骨架屏加载

---

**UI设计师**：前端团队
**最后更新**：2026-01-13
**版本**：v1.0.0